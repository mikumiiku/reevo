# ReEvo 算法概述

## 1. 初始化
- 读取问题配置（名称、描述、规模、目标类型等）。
- 加载公共与问题特定的提示模板：生成、短期/长期反思、交叉、变异。
- 若存在 `external_knowledge`，将其作为长期反思初始值，以便携带先验知识。

## 2. 种群初始化
- 评估种子函数，确保其可执行并记录为精英（elitist）。
- 通过生成式 LLM（温度略增以提高多样性）生成 `init_pop_size` 个候选代码，运行 `problems/<problem>/eval.py` 计算目标值并过滤异常个体。

## 3. 迭代进化（直至 `max_fe`）
1. **选择（Selection）**：过滤无效个体后随机抽取父代配对；若当前精英不在种群内会被额外加入以保证继承优质方案。
2. **短期反思（Short-term Reflection）**：对每对父代通过反思 LLM 比较优劣代码，生成改进建议，为交叉提供上下文。
3. **交叉（Crossover）**：结合短期反思和函数签名，调用生成式 LLM 产出 `pop_size` 个新个体，并立即执行评估脚本获取目标值。
4. **长期反思（Long-term Reflection）**：聚合本轮短期反思，更新长期记忆字符串并写入文件，以跨代共享经验、指导变异。
5. **变异（Mutation）**：以精英代码和累计反思为上下文，生成 `pop_size * mutation_rate` 个变异个体，评估后与种群合并。
6. **更新记录（Update Iteration）**：维护全局最优解、精英个体及其代码路径，同时追踪累计函数评估次数。

## 4. 终止与验证
- 达到评估上限或满足终止条件后返回全局最优代码及其路径。
- 将最优代码写入 `problems/<problem>/gpt.py` 并运行验证脚本 `eval.py -1 ... val`，输出最终表现。
